<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz ‚Äî Dist√∫rbios Hidroeletrol√≠ticos (Interativo)</title>
<style>
  :root{
    --bg:#0f1724; --card:#0b1220; --accent:#9d4edd; --muted:#94a3b8; --ok:#16a34a; --err:#ef4444;
    --glass: rgba(255,255,255,0.03);
  }
  body{font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial; background:linear-gradient(180deg,#071020,#081426); color:#e6eef8; margin:0; padding:24px;}
  header{display:flex; gap:16px; align-items:center; margin-bottom:18px;}
  h1{font-size:20px; margin:0;}
  p.lead{margin:0; color:var(--muted); font-size:14px;}
  .container{display:grid; gap:12px; max-width:980px; margin:0 auto;}
  .card{background:var(--card); border-radius:12px; padding:14px; box-shadow:0 6px 18px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);}
  .qhead{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;}
  .qnum{font-weight:600; color:var(--accent);}
  .question{font-size:16px; margin-bottom:8px;}
  .options{display:flex; flex-direction:column; gap:8px;}
  label.option{background:var(--glass); padding:10px 12px; border-radius:8px; cursor:pointer; display:flex; align-items:center; gap:10px; border:1px solid transparent;}
  input[type="radio"]{accent-color:var(--accent); width:18px; height:18px;}
  label.option:hover{border-color:rgba(157,78,221,0.2);}
  .explain{margin-top:10px; padding:10px; border-radius:8px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.04)); color:#f3e8ff; display:none; border-left:4px solid var(--accent);}
  .explain.ok{border-left-color:var(--ok);}
  .explain.err{border-left-color:var(--err);}
  .meta{font-size:13px; color:var(--muted); margin-top:6px;}
  footer{max-width:980px; margin:20px auto 60px; color:var(--muted); font-size:13px; text-align:center;}
  button{background:var(--accent); color:white; border:none; padding:8px 12px; border-radius:8px; cursor:pointer;}
  button.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06);}
  .scorecard{display:flex; gap:12px; align-items:center; flex-wrap:wrap;}
  .pill{background:rgba(255,255,255,0.04); padding:6px 10px; border-radius:999px; color:var(--muted); font-weight:600;}
</style>
</head>
<body>
<header>
  <div>
    <h1>Quiz Interativo ‚Äî Dist√∫rbios Hidroeletrol√≠ticos ‚ö°üíßü©∫</h1>
    <p class="lead">30 quest√µes baseadas exclusivamente no PDF "Dist√∫rbios HE" ‚Äî 20 gerais e 10 casos cl√≠nicos.</p>
  </div>
  <div style="margin-left:auto;">
    <div class="scorecard">
      <div class="pill" id="answeredCount">Respondidas: 0 / 20</div>
      <div class="pill" id="progressCorrect">Corretas: 0</div>
    </div>
  </div>
</header>

<main class="container" id="quiz"></main>

<footer class="card">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <div>
      <strong>Como usar</strong>
      <div class="meta">Selecione uma alternativa para ver a explica√ß√£o. Pode mudar de resposta a qualquer momento.</div>
    </div>
    <div style="display:flex; gap:8px;">
      <button id="showAll">Mostrar explica√ß√µes</button>
      <button class="ghost" id="reset">Reiniciar quiz</button>
    </div>
  </div>
</footer>

<script>
const questions = [
  /* =================== 20 QUEST√ïES GERAIS =================== */
  {
    q:"1) Qual a osmolaridade s√©rica normal?",
    choices:[
      {text:"280‚Äì295 mOsm/L",correct:true,explain:"Correto ‚Äî valor de refer√™ncia citado no PDF."},
      {text:"250‚Äì270 mOsm/L",correct:false,explain:"Errado ‚Äî abaixo do normal."},
      {text:"300‚Äì320 mOsm/L",correct:false,explain:"Errado ‚Äî j√° sugere hiperosmolaridade."},
      {text:"260‚Äì310 mOsm/L",correct:false,explain:"Errado ‚Äî faixa incorreta."}
    ]
  },
  {
    q:"2) A hiponatremia √© definida como s√≥dio s√©rico:",
    choices:[
      {text:"<135 mEq/L",correct:true,explain:"Correto ‚Äî hiponatremia √© Na < 135."},
      {text:">145 mEq/L",correct:false,explain:"Errado ‚Äî isso √© hipernatremia."},
      {text:"<120 mEq/L",correct:false,explain:"Errado ‚Äî define hiponatremia grave, n√£o o limiar geral."},
      {text:">130 mEq/L",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"3) Qual √© o dist√∫rbio hidroeletrol√≠tico mais comum na pr√°tica cl√≠nica?",
    choices:[
      {text:"Hiponatremia",correct:true,explain:"Correto ‚Äî segundo o PDF, √© o mais frequente."},
      {text:"Hipernatremia",correct:false,explain:"Errado."},
      {text:"Hipocalemia",correct:false,explain:"Errado."},
      {text:"Hipercalcemia",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"4) O principal mecanismo da hiponatremia √©:",
    choices:[
      {text:"Redu√ß√£o da excre√ß√£o renal de √°gua",correct:true,explain:"Correto ‚Äî frequentemente devido a aumento do ADH."},
      {text:"Excesso de ingest√£o de sal",correct:false,explain:"Errado."},
      {text:"Diminui√ß√£o da ingest√£o de √°gua",correct:false,explain:"Errado ‚Äî isso causa hipernatremia."},
      {text:"Aumento da filtra√ß√£o glomerular",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"5) Entre os est√≠mulos n√£o osm√≥ticos para secre√ß√£o de ADH est√£o:",
    choices:[
      {text:"Dor, n√°useas e hipovolemia",correct:true,explain:"Correto ‚Äî todos descritos no PDF."},
      {text:"Hiperglicemia e hipertermia",correct:false,explain:"Errado."},
      {text:"Hipocalemia e hipercalcemia",correct:false,explain:"Errado."},
      {text:"Hipotermia",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"6) A hipernatremia √© definida como s√≥dio s√©rico:",
    choices:[
      {text:">145 mEq/L",correct:true,explain:"Correto ‚Äî esse √© o valor de corte."},
      {text:">135 mEq/L",correct:false,explain:"Errado ‚Äî isso ainda √© normal."},
      {text:">150 mEq/L",correct:false,explain:"Errado ‚Äî isso define casos graves."},
      {text:">140 mEq/L",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"7) Qual a principal consequ√™ncia celular da hipernatremia?",
    choices:[
      {text:"Desidrata√ß√£o celular",correct:true,explain:"Correto ‚Äî ocorre perda de √°gua intracelular."},
      {text:"Edema celular",correct:false,explain:"Errado ‚Äî isso ocorre na hiponatremia."},
      {text:"Lise celular",correct:false,explain:"Errado."},
      {text:"Ac√∫mulo de pot√°ssio intracelular",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"8) O pot√°ssio s√©rico normal √© de:",
    choices:[
      {text:"3,5‚Äì5,0 mEq/L",correct:true,explain:"Correto ‚Äî faixa de refer√™ncia."},
      {text:"2,5‚Äì3,5 mEq/L",correct:false,explain:"Errado ‚Äî hipocalemia."},
      {text:"5,5‚Äì6,5 mEq/L",correct:false,explain:"Errado ‚Äî hipercalemia."},
      {text:"4,5‚Äì6,0 mEq/L",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"9) Qual a manifesta√ß√£o eletrocardiogr√°fica t√≠pica da hipercalemia?",
    choices:[
      {text:"Onda T apiculada",correct:true,explain:"Correto ‚Äî altera√ß√£o precoce cl√°ssica."},
      {text:"Intervalo QT prolongado",correct:false,explain:"Errado ‚Äî ocorre em hipocalcemia."},
      {text:"Presen√ßa de onda U",correct:false,explain:"Errado ‚Äî ocorre em hipocalemia."},
      {text:"Bloqueio de ramo direito",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"10) A reposi√ß√£o de pot√°ssio deve ser feita preferencialmente por via:",
    choices:[
      {text:"Oral",correct:true,explain:"Correto ‚Äî via oral √© mais segura, reservando EV para casos graves."},
      {text:"Intramuscular",correct:false,explain:"Errado ‚Äî risco de necrose."},
      {text:"Intratecal",correct:false,explain:"Errado."},
      {text:"Subcut√¢nea",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"11) Qual a principal causa de hipocalemia na pr√°tica cl√≠nica?",
    choices:[
      {text:"Uso de diur√©ticos",correct:true,explain:"Correto ‚Äî diur√©ticos tiaz√≠dicos e de al√ßa s√£o as causas mais comuns."},
      {text:"Ingest√£o reduzida de pot√°ssio",correct:false,explain:"Errado ‚Äî pouco frequente isoladamente."},
      {text:"Hipomagnesemia",correct:false,explain:"Errado ‚Äî pode contribuir, mas n√£o √© a principal."},
      {text:"Alcalose respirat√≥ria",correct:false,explain:"Errado ‚Äî causa transloca√ß√£o, n√£o perda direta."}
    ]
  },
  {
    q:"12) A manifesta√ß√£o cl√≠nica mais grave da hipercalemia √©:",
    choices:[
      {text:"Arritmias card√≠acas",correct:true,explain:"Correto ‚Äî podem ser fatais."},
      {text:"Fraqueza muscular",correct:false,explain:"Errado ‚Äî sintoma comum, mas n√£o o mais grave."},
      {text:"Parestesias",correct:false,explain:"Errado."},
      {text:"Tetania",correct:false,explain:"Errado ‚Äî est√° mais relacionada √† hipocalcemia."}
    ]
  },
  {
    q:"13) Qual a principal manifesta√ß√£o da hipocalcemia aguda?",
    choices:[
      {text:"Tetania",correct:true,explain:"Correto ‚Äî resultado da excitabilidade neuromuscular aumentada."},
      {text:"Fraqueza",correct:false,explain:"Errado."},
      {text:"Bradicardia",correct:false,explain:"Errado."},
      {text:"Onda T apiculada",correct:false,explain:"Errado ‚Äî isso √© hipercalemia."}
    ]
  },
  {
    q:"14) A hipercalcemia √© definida como c√°lcio s√©rico total:",
    choices:[
      {text:">10,5 mg/dL",correct:true,explain:"Correto ‚Äî limite superior normal."},
      {text:">9,5 mg/dL",correct:false,explain:"Errado ‚Äî ainda √© normal."},
      {text:">12 mg/dL",correct:false,explain:"Errado ‚Äî define hipercalcemia grave."},
      {text:">8,5 mg/dL",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"15) Qual a principal causa de hipercalcemia no ambulat√≥rio?",
    choices:[
      {text:"Hiperparatireoidismo prim√°rio",correct:true,explain:"Correto ‚Äî √© a etiologia mais frequente em pacientes externos."},
      {text:"Neoplasias",correct:false,explain:"Errado ‚Äî mais comum em hospitalizados."},
      {text:"Hipervitaminose D",correct:false,explain:"Errado ‚Äî menos frequente."},
      {text:"Doen√ßa granulomatosa",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"16) O f√≥sforo s√©rico normal √©:",
    choices:[
      {text:"2,5‚Äì4,5 mg/dL",correct:true,explain:"Correto."},
      {text:"1,5‚Äì2,5 mg/dL",correct:false,explain:"Errado ‚Äî hipofosfatemia."},
      {text:"4,5‚Äì6,0 mg/dL",correct:false,explain:"Errado ‚Äî hiperfosfatemia."},
      {text:"3,5‚Äì6,0 mg/dL",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"17) Qual complica√ß√£o grave pode ocorrer na hipofosfatemia severa?",
    choices:[
      {text:"Fraqueza muscular e insufici√™ncia respirat√≥ria",correct:true,explain:"Correto ‚Äî fal√™ncia da musculatura respirat√≥ria √© grave."},
      {text:"Convuls√µes",correct:false,explain:"Errado ‚Äî mais comum em hiponatremia grave."},
      {text:"Arritmias ventriculares",correct:false,explain:"Errado ‚Äî mais com hipocalemia/hipercalemia."},
      {text:"Hipertens√£o",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"18) A principal causa de hiperfosfatemia √©:",
    choices:[
      {text:"Insufici√™ncia renal cr√¥nica",correct:true,explain:"Correto ‚Äî principal causa devido √† reten√ß√£o."},
      {text:"Ingest√£o excessiva de fosfato",correct:false,explain:"Errado ‚Äî incomum isoladamente."},
      {text:"Hipoparatireoidismo",correct:false,explain:"Errado ‚Äî pode contribuir, mas n√£o √© a principal."},
      {text:"Uso de corticoides",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"19) Qual exame √© essencial para avaliar dist√∫rbios do magn√©sio?",
    choices:[
      {text:"Magn√©sio s√©rico",correct:true,explain:"Correto ‚Äî apesar de limita√ß√µes, √© o exame dispon√≠vel."},
      {text:"C√°lcio s√©rico",correct:false,explain:"Errado."},
      {text:"F√≥sforo s√©rico",correct:false,explain:"Errado."},
      {text:"S√≥dio s√©rico",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"20) A hipomagnesemia est√° frequentemente associada a:",
    choices:[
      {text:"Hipocalemia e hipocalcemia",correct:true,explain:"Correto ‚Äî dist√∫rbios concomitantes s√£o frequentes."},
      {text:"Hipernatremia",correct:false,explain:"Errado."},
      {text:"Hipercalcemia",correct:false,explain:"Errado."},
      {text:"Hipofosfatemia",correct:false,explain:"Errado ‚Äî n√£o √© a associa√ß√£o t√≠pica."}
    ]
  },

  /* =================== 10 QUEST√ïES CL√çNICAS =================== */
  {
    q:"21) Homem, 72 anos, hospitalizado por pneumonia grave. Evolui com confus√£o mental. Exame: PA 100x60 mmHg, desidratado. S√≥dio s√©rico: 122 mEq/L. Qual o dist√∫rbio e principal mecanismo prov√°vel?",
    choices:[
      {text:"Hiponatremia hipot√¥nica hipovol√™mica",correct:true,explain:"Correto ‚Äî desidrata√ß√£o + Na baixo indicam hipovolemia como est√≠mulo de ADH."},
      {text:"Hiponatremia euvol√™mica",correct:false,explain:"Errado."},
      {text:"Hipernatremia",correct:false,explain:"Errado."},
      {text:"Pseudo-hiponatremia",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"22) Mulher, 30 anos, p√≥s-operat√≥rio de histerectomia. Queixa de cefaleia intensa e n√°useas. Exame: sonolenta, sem sinais de desidrata√ß√£o. S√≥dio: 118 mEq/L. Osmolaridade s√©rica: baixa. Qual a hip√≥tese?",
    choices:[
      {text:"SIADH (s√≠ndrome da secre√ß√£o inapropriada de ADH)",correct:true,explain:"Correto ‚Äî quadro cl√°ssico: euvolemia, Na baixo, osmolaridade baixa."},
      {text:"Hiponatremia hipovol√™mica",correct:false,explain:"Errado."},
      {text:"Hipernatremia",correct:false,explain:"Errado."},
      {text:"Hiponatremia hipert√¥nica",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"23) Homem, 60 anos, em uso de diur√©tico de al√ßa, apresenta c√¢imbras, fraqueza muscular e palpita√ß√µes. K s√©rico: 2,8 mEq/L. ECG: onda U evidente. Qual o diagn√≥stico?",
    choices:[
      {text:"Hipocalemia induzida por diur√©tico",correct:true,explain:"Correto ‚Äî causa cl√°ssica de hipocalemia, confirmada pelo ECG."},
      {text:"Hipercalemia",correct:false,explain:"Errado."},
      {text:"Hipocalcemia",correct:false,explain:"Errado."},
      {text:"Hiponatremia",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"24) Mulher, 25 anos, ap√≥s corrida de longa dist√¢ncia em dia quente, bebeu 4 litros de √°gua em 2h. Evolui com convuls√£o. Na s√©rico: 118 mEq/L. Qual o dist√∫rbio?",
    choices:[
      {text:"Hiponatremia aguda dilucional",correct:true,explain:"Correto ‚Äî excesso de √°gua livre diluiu o s√≥dio rapidamente."},
      {text:"Hipernatremia",correct:false,explain:"Errado."},
      {text:"Hipocalemia",correct:false,explain:"Errado."},
      {text:"Hipocalcemia",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"25) Homem, 68 anos, com insufici√™ncia renal cr√¥nica, chega com confus√£o mental. Exames: K 6,8 mEq/L; ECG com ondas T apiculadas. Qual a conduta imediata?",
    choices:[
      {text:"Gluconato de c√°lcio EV",correct:true,explain:"Correto ‚Äî estabiliza a membrana card√≠aca, medida inicial na hipercalemia grave."},
      {text:"Insulina + glicose",correct:false,explain:"Errado ‚Äî medida subsequente, n√£o a primeira."},
      {text:"Di√°lise",correct:false,explain:"Errado ‚Äî necess√°ria em alguns casos, mas n√£o √© a imediata."},
      {text:"Beta-agonista inalat√≥rio",correct:false,explain:"Errado ‚Äî tamb√©m pode ajudar, mas n√£o √© o passo inicial."}
    ]
  },
  {
    q:"26) Homem, 50 anos, alco√≥latra cr√¥nico, apresenta tremores, fraqueza e convuls√£o. Exames: Mg s√©rico 0,9 mg/dL. Qual o diagn√≥stico?",
    choices:[
      {text:"Hipomagnesemia sintom√°tica",correct:true,explain:"Correto ‚Äî valor baixo + sintomas neurol√≥gicos e hist√≥ria de etilismo."},
      {text:"Hipermagnesemia",correct:false,explain:"Errado."},
      {text:"Hipocalemia",correct:false,explain:"Errado."},
      {text:"Hipocalcemia",correct:false,explain:"Errado ‚Äî apesar de convuls√£o, aqui √© Mg baixo."}
    ]
  },
  {
    q:"27) Mulher, 65 anos, com carcinoma de pulm√£o metast√°tico, apresenta fraqueza, constipa√ß√£o e confus√£o mental. C√°lcio s√©rico: 13,5 mg/dL. Qual a principal etiologia?",
    choices:[
      {text:"Hipercalcemia maligna",correct:true,explain:"Correto ‚Äî neoplasias s√≥lidas frequentemente causam hipercalcemia."},
      {text:"Hiperparatireoidismo prim√°rio",correct:false,explain:"Errado ‚Äî mais comum em ambulat√≥rio."},
      {text:"Hipervitaminose D",correct:false,explain:"Errado."},
      {text:"Doen√ßa granulomatosa",correct:false,explain:"Errado."}
    ]
  },
  {
    q:"28) Homem, 40 anos, em interna√ß√£o prolongada em UTI, evolui com fraqueza respirat√≥ria. Exames: f√≥sforo 1,2 mg/dL. Qual a complica√ß√£o mais grave associada?",
    choices:[
      {text:"Fal√™ncia respirat√≥ria por hipofosfatemia",correct:true,explain:"Correto ‚Äî a hipofosfatemia grave compromete musculatura respirat√≥ria."},
      {text:"Convuls√µes",correct:false,explain:"Errado."},
      {text:"Arritmias ventriculares",correct:false,explain:"Errado."},
      {text:"Hipertens√£o arterial",correct:false,explain:"Errado."}
    ]
  },
{
    q:"29) Mulher, 45 anos, admitida ap√≥s politrauma. Evolui com Na s√©rico 150 mEq/L, sede intensa, mucosas ressecadas e diurese baixa. Qual o dist√∫rbio e mecanismo mais prov√°vel?",
    choices:[
      {text:"Hipernatremia por perda insens√≠vel de √°gua e hipovolemia",correct:true,explain:"Correto ‚Äî o trauma cursou com desidrata√ß√£o e perda h√≠drica, elevando o Na s√©rico."},
      {text:"Hiponatremia dilucional por SIADH",correct:false,explain:"Errado ‚Äî Na est√° elevado, n√£o baixo."},
      {text:"Hipernatremia por excesso de ingest√£o de s√≥dio",correct:false,explain:"Errado ‚Äî n√£o h√° relato de ingesta salina."},
      {text:"Hipocalemia secund√°ria a diur√©tico",correct:false,explain:"Errado ‚Äî dist√∫rbio √© no s√≥dio, n√£o no pot√°ssio."}
    ]
  },
  {
    q:"30) Homem, 55 anos, etilista cr√¥nico, chega confuso e desidratado. Exames: Na 128 mEq/L, K 3,0 mEq/L, Mg 1,1 mg/dL. Qual a melhor explica√ß√£o para o quadro?",
    choices:[
      {text:"Dist√∫rbio hidroeletrol√≠tico m√∫ltiplo por alcoolismo cr√¥nico",correct:true,explain:"Correto ‚Äî alcoolismo leva a hiponatremia (ingesta excessiva de l√≠quidos + m√° nutri√ß√£o), hipocalemia e hipomagnesemia."},
      {text:"SIADH isolado",correct:false,explain:"Errado ‚Äî explicaria apenas hiponatremia euvol√™mica."},
      {text:"Hipercalcemia por alcoolismo",correct:false,explain:"Errado ‚Äî c√°lcio n√£o est√° elevado."},
      {text:"Hipernatremia por desidrata√ß√£o",correct:false,explain:"Errado ‚Äî o Na est√° baixo, n√£o alto."}
    ]
  }
];

function shuffle(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}return array;}

const quizEl=document.getElementById('quiz');
let state={answered:0,correct:0};

function render(){
  quizEl.innerHTML='';
  questions.forEach((item,idx)=>{
    const choices=shuffle(item.choices.map((c,i)=>({...c,id:`q${idx}_c${i}`})));
    const wrap=document.createElement('section');
    wrap.className='card';wrap.dataset.qindex=idx;
    wrap.innerHTML=`<div class="qhead"><div class="qnum">Quest√£o ${idx+1}</div></div>
    <div class="question">${item.q}</div>
    <div class="options" id="opts-${idx}"></div>
    <div class="explain" id="exp-${idx}"></div>`;
    const optsEl=wrap.querySelector(`#opts-${idx}`);
    choices.forEach(c=>{
      const lab=document.createElement('label');lab.className='option';
      lab.innerHTML=`<input type="radio" name="q${idx}" data-correct="${c.correct}" data-explain="${c.explain}"><div>${c.text}</div>`;
      optsEl.appendChild(lab);
      lab.querySelector('input').addEventListener('change',(e)=>handleAnswer(idx,e.target));
    });
    quizEl.appendChild(wrap);
  });
  updateStatus();
}

function handleAnswer(idx,inputEl){
  const exp=document.getElementById(`exp-${idx}`);
  const correct=inputEl.dataset.correct==='true';
  const explain=inputEl.dataset.explain;
  exp.style.display='block';
  exp.innerHTML=(correct?'‚úÖ <b>Correto.</b> ':'‚ùå <b>Incorreto.</b> ')+explain;
  exp.classList.toggle('ok',correct);
  exp.classList.toggle('err',!correct);
  updateProgress();
}

function updateProgress(){
  let a=0,c=0;
  questions.forEach((_,idx)=>{
    const radios=document.getElementsByName(`q${idx}`);let any=false,corr=false;
    for(const r of radios){if(r.checked){any=true;if(r.dataset.correct==='true')corr=true;break;}}
    if(any)a++;if(corr)c++;
  });
  state.answered=a;state.correct=c;updateStatus();
}

function updateStatus(){
  document.getElementById('answeredCount').textContent=`Respondidas: ${state.answered} / ${questions.length}`;
  document.getElementById('progressCorrect').textContent=`Corretas: ${state.correct}`;
}

document.getElementById('showAll').addEventListener('click',()=>{
  questions.forEach((_,idx)=>{
    const radios=document.getElementsByName(`q${idx}`);
    const exp=document.getElementById(`exp-${idx}`);let any=false;
    for(const r of radios){
      if(r.checked){any=true;const corr=r.dataset.correct==='true';
        exp.style.display='block';
        exp.innerHTML=(corr?'‚úÖ <b>Correto.</b> ':'‚ùå <b>Incorreto.</b> ')+r.dataset.explain;
        exp.classList.toggle('ok',corr);exp.classList.toggle('err',!corr);
        break;}
    }
    if(!any){exp.style.display='block';exp.innerHTML='<em>Nenhuma alternativa selecionada.</em>';exp.classList.remove('ok','err');}
  });
  updateProgress();
});

document.getElementById('reset').addEventListener('click',()=>{
  questions.forEach((_,idx)=>{
    const radios=document.getElementsByName(`q${idx}`);
    for(const r of radios)r.checked=false;
    const exp=document.getElementById(`exp-${idx}`);
    exp.style.display='none';exp.innerHTML='';exp.classList.remove('ok','err');
  });
  state={answered:0,correct:0};updateStatus();
});

render();
</script>
</body>
</html>
